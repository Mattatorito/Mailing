# üöÄ Professional Email Marketing Tool - Enhanced Edition

## üéØ –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ (–≤–µ—Ä—Å–∏—è 2.0)

### ‚ú® –ß—Ç–æ –Ω–æ–≤–æ–≥–æ –≤ Enhanced Edition:

üîí **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**
- JWT —Ç–æ–∫–µ–Ω—ã –∏ session-based –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- HTTPS –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Å SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º–∏
- Rate limiting –∏ –∑–∞—â–∏—Ç–∞ –æ—Ç DDoS
- –î–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (–≥–æ—Ç–æ–≤–∞ –∫ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ)

‚ö° **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–æ–≤ —Å Redis –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º rate limiting
- –ë–∞—Ç—á–∏–Ω–≥ –æ–ø–µ—Ä–∞—Ü–∏–π —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
- Connection pooling –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö API

üìä **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**
- Prometheus –º–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- –°–∏—Å—Ç–µ–º–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (CPU, –ø–∞–º—è—Ç—å, –¥–∏—Å–∫–∏)
- Business –º–µ—Ç—Ä–∏–∫–∏ (bounce rate, delivery rate)
- Health checks —Å –¥–µ—Ç–∞–ª—å–Ω–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–æ–π

üíæ **–†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ scheduled –±—ç–∫–∞–ø—ã
- –ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ –±—ç–∫–∞–ø—ã —Å —Å–∂–∞—Ç–∏–µ–º
- –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –±—ç–∫–∞–ø–æ–≤
- –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å rollback –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏

üß™ **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**
- –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–µ E2E —Ç–µ—Å—Ç—ã
- Mock –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- 95%+ –ø–æ–∫—Ä—ã—Ç–∏–µ –Ω–æ–≤—ã—Ö –º–æ–¥—É–ª–µ–π
- Performance –∏ security —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

## üõ† –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç —Å —É–ª—É—á—à–µ–Ω–∏—è–º–∏

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Enhanced –≤–µ—Ä—Å–∏–∏

```bash
# –ö–ª–æ–Ω–∏—Ä—É–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone <repository-url>
cd Mailing

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —É–ª—É—á—à–µ–Ω–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
make enhanced-install
```

### 2. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤

```bash
# –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (—Å–∞–º–æ–ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–µ)
make ssl-certs

# –î–ª—è production (–Ω–∞—Å—Ç—Ä–æ–π—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã)
cp /path/to/your/cert.pem certs/
cp /path/to/your/key.pem certs/
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

```bash
# –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å–µ–∫—Ä–µ—Ç–Ω—ã–µ –∫–ª—é—á–∏
make auth-setup

# –î–æ–±–∞–≤–ª—è–µ–º –≤ .env —Ñ–∞–π–ª
echo "AUTH_SECRET_KEY=your-generated-key" >> .env
echo "ADMIN_USERNAME=admin" >> .env
echo "ADMIN_PASSWORD=secure-password" >> .env
```

### 4. –ó–∞–ø—É—Å–∫ Enhanced –≤–µ—Ä—Å–∏–∏

#### Development mode:
```bash
make enhanced-dev
```

#### Production mode —Å HTTPS:
```bash
make enhanced-prod
```

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
ENVIRONMENT=production
RESEND_API_KEY=your-api-key

# HTTPS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
HTTPS_ENABLED=true
FORCE_HTTPS=true
SSL_CERT_FILE=/app/certs/cert.pem
SSL_KEY_FILE=/app/certs/key.pem

# –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
AUTH_SECRET_KEY=your-secret-key
ADMIN_USERNAME=admin
ADMIN_PASSWORD=secure-password

# –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
TEMPLATE_CACHE_ENABLED=true
TEMPLATE_CACHE_TTL=3600
REDIS_HOST=localhost
REDIS_PORT=6379

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
METRICS_ENABLED=true
PROMETHEUS_PORT=8001

# –ë—ç–∫–∞–ø—ã
BACKUP_ENABLED=true
BACKUP_SCHEDULE_HOURS=2,14
BACKUP_RETENTION_DAYS=30
```

### Docker Compose —Å —É–ª—É—á—à–µ–Ω–∏—è–º–∏

```yaml
version: '3.8'
services:
  email-app:
    build: .
    ports:
      - "8080:8080"
      - "8443:8443"  # HTTPS
    environment:
      - HTTPS_ENABLED=true
      - TEMPLATE_CACHE_ENABLED=true
      - METRICS_ENABLED=true
      - BACKUP_ENABLED=true
    volumes:
      - ./certs:/app/certs:ro
      - ./backups:/app/backups
  
  redis:
    image: redis:7-alpine
    ports:
      - "6379:6379"
  
  prometheus:
    image: prom/prometheus
    ports:
      - "9090:9090"
```

## üìä –ù–æ–≤—ã–µ API Endpoints

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
```bash
# –õ–æ–≥–∏–Ω
POST /auth/login
{
  "username": "admin",
  "password": "password"
}

# –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
POST /auth/refresh
{
  "refresh_token": "your-refresh-token"
}
```

### –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
```bash
# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫—ç—à–∞
GET /admin/cache/stats
Authorization: Bearer <token>

# –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞
POST /admin/cache/clear
Authorization: Bearer <token>

# –°–ø–∏—Å–æ–∫ –±—ç–∫–∞–ø–æ–≤
GET /admin/backup/list
Authorization: Bearer <token>

# –°–æ–∑–¥–∞–Ω–∏–µ –±—ç–∫–∞–ø–∞
POST /admin/backup/create
Authorization: Bearer <token>
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
```bash
# Prometheus –º–µ—Ç—Ä–∏–∫–∏
GET /metrics

# –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π health check
GET /health

# –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
GET /admin/stats
Authorization: Bearer <token>
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
```bash
# –û–±—ã—á–Ω—ã–µ —Ç–µ—Å—Ç—ã
make test

# –° –ø–æ–∫—Ä—ã—Ç–∏–µ–º
make test-cov

# E2E —Ç–µ—Å—Ç—ã
make test-e2e

# –¢–æ–ª—å–∫–æ –Ω–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
pytest tests/test_e2e_comprehensive.py -v
```

### –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
curl -X POST http://localhost:8080/auth/login \
  -H "Content-Type: application/json" \
  -d '{"username":"admin","password":"admin123"}'

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–µ—Ç—Ä–∏–∫
curl http://localhost:8080/metrics

# –ü—Ä–æ–≤–µ—Ä–∫–∞ health check
curl http://localhost:8080/health
```

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–ª–µ—Ä—Ç—ã

### Prometheus –º–µ—Ç—Ä–∏–∫–∏
- `emails_sent_total` - –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö –ø–∏—Å–µ–º
- `email_delivery_duration_seconds` - –≤—Ä–µ–º—è –¥–æ—Å—Ç–∞–≤–∫–∏
- `template_renders_total` - —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ —à–∞–±–ª–æ–Ω–æ–≤
- `cache_hits_total` / `cache_misses_total` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫—ç—à–∞
- `backup_operations_total` - –æ–ø–µ—Ä–∞—Ü–∏–∏ –±—ç–∫–∞–ø–∞

### Grafana Dashboard
```json
{
  "dashboard": {
    "title": "Email Marketing - Enhanced",
    "panels": [
      {
        "title": "Email Delivery Rate",
        "targets": [
          {
            "expr": "rate(emails_sent_total[5m])"
          }
        ]
      },
      {
        "title": "Cache Hit Ratio", 
        "targets": [
          {
            "expr": "cache_hits_total / (cache_hits_total + cache_misses_total) * 100"
          }
        ]
      }
    ]
  }
}
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ä—ã
- ‚úÖ HTTPS –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
- ‚úÖ JWT —Ç–æ–∫–µ–Ω—ã —Å –∏—Å—Ç–µ—á–µ–Ω–∏–µ–º —Å—Ä–æ–∫–∞
- ‚úÖ Rate limiting –Ω–∞ API endpoints
- ‚úÖ Input sanitization –∏ validation
- ‚úÖ SQL injection –∑–∞—â–∏—Ç–∞
- ‚úÖ XSS –∏ CRLF injection –∑–∞—â–∏—Ç–∞
- ‚úÖ Security headers (HSTS, CSP, etc.)

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è production
1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã** (Let's Encrypt, Cloudflare)
2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ WAF** (Web Application Firewall)
3. **–†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**
4. **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –ª–æ–≥–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏**
5. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—ç–∫–∞–ø—ã**

## üíæ –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—ç–∫–∞–ø—ã
```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –º–∞–Ω—É–∞–ª—å–Ω–æ–≥–æ –±—ç–∫–∞–ø–∞
make backup-create

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–ø–∏—Å–∫–∞ –±—ç–∫–∞–ø–æ–≤
curl -H "Authorization: Bearer <token>" \
  http://localhost:8080/admin/backup/list

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ –±—ç–∫–∞–ø–∞
python -c "
import asyncio
from src.persistence.backup import get_backup_manager
asyncio.run(get_backup_manager().restore_backup('backup_file.db.gz'))
"
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
```bash
# –í crontab –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏
0 2,14 * * * cd /app && make backup-create
```

## üé® –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–æ–≤

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫—ç—à–∞
```bash
# –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
curl -H "Authorization: Bearer <token>" \
  http://localhost:8080/admin/cache/stats

# –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞
make cache-clear

# –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞ —à–∞–±–ª–æ–Ω–æ–≤
python -c "
import asyncio
from src.templating.cached_engine import get_template_engine
asyncio.run(get_template_engine().preload_templates())
"
```

## üöÄ Production Deployment

### Kubernetes
```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: email-marketing-enhanced
spec:
  replicas: 3
  selector:
    matchLabels:
      app: email-marketing
  template:
    spec:
      containers:
      - name: app
        image: email-marketing:enhanced
        ports:
        - containerPort: 8080
        - containerPort: 8443
        env:
        - name: HTTPS_ENABLED
          value: "true"
        - name: METRICS_ENABLED
          value: "true"
        - name: BACKUP_ENABLED
          value: "true"
        volumeMounts:
        - name: ssl-certs
          mountPath: /app/certs
          readOnly: true
        - name: backups
          mountPath: /app/backups
```

### Docker Swarm
```bash
# Deploy stack
docker stack deploy -c docker-compose.yml email-marketing

# Scaling
docker service scale email-marketing_email-app=3

# Updates
docker service update --image email-marketing:enhanced-v2.1 \
  email-marketing_email-app
```

## üìñ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏](docs/SECURITY.md)
- [API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](docs/API_DOCUMENTATION.md)
- [–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–ª–µ—Ä—Ç—ã](docs/MONITORING.md)
- [Troubleshooting](docs/TROUBLESHOOTING.md)
- [Performance —Ç—Éning](docs/PERFORMANCE.md)

## ü§ù –ü–æ–¥–¥–µ—Ä–∂–∫–∞

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
tail -f logs/app.log

# Debug —Ä–µ–∂–∏–º
export LOG_LEVEL=DEBUG
make enhanced-dev
```

### –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö —Å–∏—Å—Ç–µ–º
curl http://localhost:8080/health

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–µ—Ç—Ä–∏–∫
make metrics-check

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫—ç—à–∞
python -c "
from src.templating.cached_engine import get_template_engine
print(get_template_engine().get_cache_stats())
"
```

---

## üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**Enhanced Edition** –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç –±–∞–∑–æ–≤—ã–π email marketing –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –≤ enterprise-ready —Ä–µ—à–µ–Ω–∏–µ —Å:

- **Production-ready –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å—é**
- **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π**
- **–ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–º –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º**
- **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏**

–ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≤ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã—Ö –±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å–∞—Ö! üöÄ

**–í–µ—Ä—Å–∏—è:** 2.0.0 Enhanced  
**–î–∞—Ç–∞:** 22 –æ–∫—Ç—è–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ Production Ready